<script type="text/javascript">
    jQuery(document).ready(function($) {
    $(".scroll").click(function(event){
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1000);
    });
    $('.rating-container .star').click(function() {
    $('.rating-container .star').prop('src', 'img/star.svg');
    $(this).prevAll('.star').addBack().prop('src', 'img/star2.jpg');
    console.dir($(this)[0].attributes.value.value);
    $("#ratingHouse").val($(this)[0].attributes.value.value);
    });
    });</script>


<section ng-controller="consultarMiHogarCtrl" class="uk-section uk-section-small">
    <div class="uk-container uk-container-small">

        <div class="uk-grid uk-grid-small" uk-grid>

            <!-- Termina panel izquierdo - Inicia panel derecho -->
            <div class="uk-width-expand@m">
                <div class="sidebar">
                    <div class="uk-child-width-1-2@s panelfield" uk-grid>
                        <div>
                            <h3 class="panel-title">Mi Anfitrión</h3>
                            <div>
                                <div class="uk-text-right uk-align-center">
                                    <img class="uk-display-inline-block uk-border-circle" src="{{responsable.avatar}}" width="76" height="76"alt=" ">
                                    <div class="txt">
                                        <div class="name nameanfi"> {{responsable.nombre}} {{responsable.primerApellido}} </div>
                                        <div class="username useranfi">@{{responsable.nombreUsuario}}</div>
                                    </div>
                                </div>
                            </div>
                            <button ng-click="loadParams(responsable.idUsuario);" class="enviarsolicitud uk-align-right@s uk-align-center" type="button" name="button" uk-toggle="target: #id-ban-message1">Enviar Mensaje</button> 
                            <!--<button class="enviarsolicitud" type="button" name="button">Calificar</button>--> 
                        </div>
                        <div>
                            <h3 class="nomarginb">{{vivienda.titulo}}</h3>
                            <a class="viviendacard" href="#">
                                <div class="uk-background-cover casacard" style="background-image: url(../../../uploads/{{vivienda.portada}});">

                                    <div class="uk-card uk-card-large uk-card-body">
                                        <p>Ver más</p>
                                    </div>
                                </div>
                                <div class="footerViviendas uk-width-1-1">
                                    <div class="uk-float-left" style="margin-top: 6px">
                                        <p class="nomarginb"></p>
                                        <p class="nomargint uk-text-left">Inquilinos: (4)</p>
                                    </div>

                                    <div class="uk-navbar-container uk-float-right" style="margin-top: 5px">
                                        <div class="uk-navbar-center" style="background: #f2f2f2;">
                                            <ul class="uk-navbar-nav uk-width-1-1 uk-flex-around stars nomargint">
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5" ></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li>
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>


                                </div>
                            </a>

                            <button  ng-if="noCheckIn!= 1" class="enviarsolicitud uk-align-right@s uk-align-center" type="button" name="button" uk-toggle="target: #modalConfirmacion">Confirmar llegada</button> 
                            <button  ng-if="appli.status == 2 && noCheckIn== 1" ng-click="loadParams(x.idResponsable);" class="enviarsolicitud uk-align-right@s uk-align-center" type="button" name="button" uk-toggle="target: #id-ban-message">Calificar Vivienda y Terminar Contrato</button> 
                            
                            
                             

                        </div>
                    </div>
                </div>

                <!--ROOMIES--> 
                <div ng-if="vivienda.rentaCuarto == true" class="sidebar smallmargin">
                    <h3>Mis Roomies</h3>
                    <div uk-slider="center:false" class="uk-position-relative">

                        <div class="uk-position-relative uk-light">
                            <ul class="uk-slider-items uk-child-width-1-3@l uk-child-width-1-3@m uk-child-width-1-2">
                                <li ng-repeat="x in roomies" ng-if="x.idUsuario != userSes.idUsuario">
                                    <div class="centrarv centrarv-conoce">
                                        <img class="uk-display-inline-block uk-border-circle" src="{{x.avatar}}" alt=" ">
                                        <div class="txt" style="position: relative;">
                                            <div class="name"><i class="glyphicon bfh-flag-{{x.nacionalidad}}"></i>@{{x.nombreUsuario}} </div>
                                            <div class="username">{{x.mensaje}}</div>
                                            <ul class="uk-navbar-nav uk-width-1-1 stars starsconoce nomargint">
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5" ></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li class="uk-active">
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                                <li>
                                                    <span uk-icon="icon: star; ratio: 0.5"></span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>

                        </div>

                        <a class="uk-position-center-left uk-position-small" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                        <a class="uk-position-center-right uk-position-small" href="#" uk-slidenav-next uk-slider-item="next"></a>

                    </div>
                </div>

                <!-- Inician Cuarto -->

                <div ng-if="vivienda.rentaCuarto == true" class="sidebar smallmargin">
                    <div class="uk-child-width-1-1 panelfield" uk-grid>
                        <div>
                            <h3 class="panel-title">Mi Habitación:</h3>
                        </div>
                    </div>

                    <div class="uk-width-1-1 mediumargin">

                        <h3 class="nomarginb">{{miCuarto.titulo}}</h3>
                        <a class="viviendacard" href="#">
                            <div class="uk-background-cover casacard" style="background-image: url(../../uploads/{{miCuarto.portada}});">

                                <div class="uk-card uk-card-large uk-card-body">
                                    <p>Ver más</p>
                                </div>
                            </div>
<!--                            <div class="footerViviendas uk-width-1-1">
                                <div class="uk-float-left" style="margin-top: 6px">
                                    <p class="nomarginb"></p>
                                    <p class="nomargint uk-text-left">Inquilinos: (4)</p>
                                </div>

                                <div class="uk-navbar-container uk-float-right" style="margin-top: 5px">
                                    <div class="uk-navbar-center" style="background: #f2f2f2;">
                                        <ul class="uk-navbar-nav uk-width-1-1 uk-flex-around stars nomargint">
                                            <li class="uk-active">
                                                <span uk-icon="icon: star; ratio: 0.5" ></span>
                                            </li>
                                            <li class="uk-active">
                                                <span uk-icon="icon: star; ratio: 0.5"></span>
                                            </li>
                                            <li class="uk-active">
                                                <span uk-icon="icon: star; ratio: 0.5"></span>
                                            </li>
                                            <li class="uk-active">
                                                <span uk-icon="icon: star; ratio: 0.5"></span>
                                            </li>
                                            <li>
                                                <span uk-icon="icon: star; ratio: 0.5"></span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                            </div>-->
                        </a>

                        <!--<button class="enviarsolicitud" type="button" name="button">Calificar</button>--> 
                    </div>
                </div>
                <div class="sidebar smallmargin">
                    <h3 class="nomarginb">Ubicación</h3>
                    <div id="map"></div>

                </div>

                <div class="sidebar smallmargin">
                    <div class="uk-child-width-1-1 panelfield" uk-grid>
                        <div>
                            <h3 class="panel-title">Próximo pago: ({{rentaMensual}}MXN)</h3>
                        </div>
                    </div>

                    <div class="uk-width-1-1 mediumargin">
                        <div class="uk-grid-small uk-child-width-auto" uk-grid uk-countdown="date: 2018-07-06T12:00:00+00:00">
                            <div>
                                <div class="uk-countdown-number uk-countdown-days"></div>
                                <div class="uk-countdown-label uk-margin-small uk-text-center uk-visible@s">Días</div>
                            </div>
                            <div class="uk-countdown-separator">:</div>
                            <div>
                                <div class="uk-countdown-number uk-countdown-hours"></div>
                                <div class="uk-countdown-label uk-margin-small uk-text-center uk-visible@s">Horas</div>
                            </div>
                            <div class="uk-countdown-separator">:</div>
                            <div>
                                <div class="uk-countdown-number uk-countdown-minutes"></div>
                                <div class="uk-countdown-label uk-margin-small uk-text-center uk-visible@s">Minutos</div>
                            </div>
                            <div class="uk-countdown-separator">:</div>
                            <div>
                                <div class="uk-countdown-number uk-countdown-seconds"></div>
                                <div class="uk-countdown-label uk-margin-small uk-text-center uk-visible@s">Segundos</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- Termina panel derecho -->
    </div>



    <!--MODAL-->
    <div id="id-ban-message" class="modal" uk-modal>
        <div class="uk-modal-dialog uk-modal-body modal-custom">

            <p class="uk-width-1-1 uk-button uk-button-default uk-modal-close cerrarmodal">X</p>
            <div class="uk-modal-title">Califica tu vivienda y termina contrato</div>
            

            <form  class="uk-form" >



                <div class="rating-container uk-navbar-nav uk-width-1-1 uk-flex-around stars nomargint" style="background: #f2f2f2">
                    <img id="s1" class="star" src="img/star.svg" value="1">
                    <img id="s2" class="star" src="img/star.svg" value="2">
                    <img id="s3" class="star" src="img/star.svg" value="3">
                    <img id="s4" class="star" src="img/star.svg" value="4">
                    <img id="s5" class="star" src="img/star.svg" value="5">
                    <input id="ratingHouse" type="hidden" value="0">
                </div>

                <div class="uk-clearfix"></div>
                <div>
                    <br>
                    <textarea ng-model="content" class="uk-margin-small-top uk-textarea" cols="1" rows="6" placeholder="Describe tu experiencia"></textarea>
                </div> 



                <p class="uk-text-right btn-modal">

                    <button ng-click="calificarMiHogar(vivienda.idVivienda)"  class="uk-button uk-button-success uk-modal-close" type="submit">Calificar</button>
                </p>
            </form>



        </div>
    </div>  

    <div ng-controller="initConversationCtrl" id="id-ban-message1" class="modal" uk-modal>
        <div class="uk-modal-dialog uk-modal-body modal-custom">

            <p class="uk-width-1-1 uk-button uk-button-default uk-modal-close cerrarmodal">X</p>
            <div class="uk-modal-title">

                <div class="textmodal">
                    <div class="fecha">
                        <figure class="uk-text-center" style="float: left;">
                            <img src="{{responsable.avatar}}" alt="" width="100">
                        </figure>
                    </div>
                    <div class="name">{{responsable.nombre}} {{responsable.primerApellido}}</div>
                    <div class="username">@{{responsable.nombreUsuario}} </div>
                </div>
            </div>
            <div class="uk-clearfix"></div>


            <form  class="uk-form" >

                <div>
                    <textarea ng-model="mensaje" class="uk-margin-small-top uk-textarea" cols="10" rows="6" required placeholder="Mensaje"></textarea>
                </div> 


                <p class="uk-text-right btn-modal">

                    <button ng-click="enviar()"  class="uk-button uk-button-success uk-modal-close" type="submit">Enviar</button>
                </p>
            </form>



        </div>
    </div>  


    <!-- This is the modal -->
    <div id="modalConfirmacion"  class="modal" uk-modal>
        <div class="uk-modal-dialog uk-modal-body modal-custom">
            <p class="uk-width-1-1 uk-button uk-button-default uk-modal-close cerrarmodal">X</p>
            <div class="uk-modal-title">

                <div class="textmodal">
                    <div class="name">Confirmar entrega de llave</div>
                </div>
            </div>
            <div class="uk-clearfix"></div>
            <p class="modalp">
                ¿Deseas confirmar tu llegada y entrega de llaves?
            </p>
            <div>
                <textarea ng-model="comentario" class="uk-margin-small-top uk-textarea" cols="10" rows="6" required placeholder="Comentario opcional sobre tu llegada"></textarea>
            </div> 
            <p class="uk-text-right btn-modal">

                <button ng-click="confirmar(appli.id_contract);" class="uk-button uk-button-success uk-modal-close" type="submit">Sí</button>
                <button class="uk-button uk-button-danger uk-modal-close " type="submit">No</button>
            </p>
        </div>
    </div>
    <!-- FIN ventana modal -->

</section>

